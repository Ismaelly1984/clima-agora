/* Additional responsive + mobile drawer styles */
#menuToggle{display:none}
.site-header nav{display:flex;gap:8px;align-items:center;flex-wrap:wrap;justify-content:center;flex:1 1 auto}
.nav-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.45);backdrop-filter:blur(2px);z-index:98;opacity:0;pointer-events:none;transition:opacity .2s ease}
.nav-backdrop.show{opacity:1;pointer-events:auto}
.mobile-nav{position:fixed;top:0;left:0;bottom:0;width:min(86vw,320px);background:var(--glass-bg);border-right:1px solid var(--glass-border);box-shadow:var(--shadow);z-index:99;transform:translateX(-100%);transition:transform .22s ease;padding:16px;backdrop-filter:blur(10px)}
.mobile-nav.open{transform:translateX(0)}
.mobile-nav nav{display:flex;flex-direction:column;gap:8px}
@media (max-width: 900px){.site-header nav{display:none}#menuToggle{display:inline-flex}}



/* CTA de instalar (discreto) */
.home-actions{margin:4px 2px 10px}
.install-cta{display:inline-flex;align-items:center;gap:6px;background:transparent;border:none;color:var(--text-muted);font-size:14px;padding:4px 0;cursor:pointer}
.install-cta svg{width:18px;height:18px;opacity:.9}
.install-cta:hover{color:var(--text)}
.install-cta:focus-visible{outline:2px solid var(--color-primary);outline-offset:2px;border-radius:6px}

/* Consistência de links (texto), sem afetar botões de navegação */
main a:not(.secondary-btn):not(.chip){
  color: var(--text);
  text-decoration: underline;
  text-underline-offset: 2px;
  text-decoration-color: rgba(59,130,246,.5);
}
main a:not(.secondary-btn):not(.chip):hover{ text-decoration-color: var(--color-primary); }
footer a{ color: var(--text-muted); text-decoration: underline; text-underline-offset: 2px; text-decoration-color: rgba(59,130,246,.45); }
footer a:hover{ text-decoration-color: var(--color-primary); color: var(--text); }

/* Mobile: botão instalar apenas no menu lateral */
@media (max-width: 900px){
  .home-actions, footer .install-cta { display: none !important; }
}

/* ---------- Responsividade adicional ---------- */
/* Ajuste global: cartas de previsão mais compactas */
.forecast-row{grid-auto-columns:minmax(100px,1fr)}
.today-row{grid-auto-columns:minmax(120px,1fr)}
.forecast-card .f-icon{width:48px;height:48px}
.today-card .f-icon{width:44px;height:44px}
/* Suaviza rolagem horizontal e evita bounce de página */
.forecast-row,.today-row{scroll-behavior:smooth;-webkit-overflow-scrolling:touch;overscroll-behavior-x:contain}

/* Garante que os cards não "cortem" nas laterais em telas pequenas */
@media (max-width: 480px){
  .glass{max-width:100%}
  .forecast-section,.today-section,.search-card,.weather-card{overflow:hidden}
  .forecast-row,.today-row{padding-inline:10px}
  .forecast-card,.today-card{min-width:0}
}
/* Telas grandes: ampliar largura útil */
@media (min-width: 1200px){
  .site-header{max-width: 1200px}
  .container{max-width: 1200px}
}

/* Tablets (600–900px): compactar paddings e tipografia */
@media (max-width: 900px) and (min-width: 600px){
  .site-header{padding:16px 14px}
  .container{padding:12px 14px 40px}
  .weather-card{padding:16px}
}

/* Mobile <= 480px: reduzir espaçamentos e ícones maiores/menores conforme contexto */
@media (max-width: 480px){
  .site-header{padding:12px 10px}
  .brand-title{font-size:16px}
  .brand-icon{width:24px;height:24px}
  .container{padding:10px 12px 36px}
  .primary-btn,.secondary-btn,.toggle-btn{padding:10px 12px;font-size:14px;min-height:44px}
  input#cityInput{padding:10px 12px}
  .weather-icon{width:72px;height:72px}
  .temperature{font-size:24px}
  .forecast-card{min-height:104px;padding:10px}
  .today-row{grid-auto-columns:minmax(110px,1fr)}
  .forecast-row{grid-auto-columns:minmax(100px,1fr);gap:8px}
  .weather-extra{grid-template-columns:1fr}
  #menuToggle.icon-btn{min-height:44px}
  /* Reorganiza a barra de busca: input + buscar lado a lado */
  .search-row{
    grid-template-columns: minmax(0,1fr) auto !important;
    grid-template-areas:
      "input search"
      "geo   geo"
      "unit  unit";
    grid-auto-rows: minmax(44px,auto);
    align-items: stretch;
    gap: 8px;
  }
  #cityInput{grid-area: input;width:100%;min-width:0}
  #searchBtn{grid-area: search;white-space:nowrap;min-width:44px;max-width:40vw}
  #geoBtn{grid-area: geo;width:100%}
  #unitToggle{grid-area: unit;justify-self:end;width:auto}
}

/* Mobile muito estreito <= 360px: ajustes finos de largura */
@media (max-width: 360px){
  .forecast-row{grid-auto-columns:minmax(90px,1fr);gap:6px}
  .today-row{grid-auto-columns:minmax(96px,1fr)}
  .description{font-size:16px}
  .forecast-desc{font-size:12px}
  .forecast-pop,.forecast-rain{font-size:11px}
  .forecast-time{font-size:13px}
  /* Mantém layout da busca compacto */
  .search-row{grid-template-columns: minmax(0,1fr) auto !important; gap:8px}
  #unitToggle{justify-self:stretch}
}

/* Mobile ultra-estreito <= 320px */
@media (max-width: 320px){
  .site-header{padding:10px 8px}
  .brand-title{font-size:15px}
  .brand-icon{width:22px;height:22px}
  .container{padding:8px 10px 32px}
  .intro{font-size:14px}
  .primary-btn,.secondary-btn,.toggle-btn{padding:9px 10px;font-size:13px;min-height:44px}
  input#cityInput{padding:10px 12px;font-size:14px}
  #menuToggle.icon-btn{min-height:44px}
  .weather-icon{width:64px;height:64px}
  .temperature{font-size:22px}
  .description{font-size:15px}
  .metric{padding:10px}
  .metric .label{font-size:11px}
  .metric .value{font-size:15px}
  .forecast-row{grid-auto-columns:minmax(86px,1fr);gap:6px}
  .today-row{grid-auto-columns:minmax(92px,1fr)}
  .forecast-desc{font-size:11px}
  .forecast-pop,.forecast-rain{font-size:10px}
  .forecast-time{font-size:12px}
  .chip{font-size:12px;padding:6px 8px}
  /* Busca ainda mais compacta */
  .search-row{grid-template-columns: minmax(0,1fr) auto !important; gap:6px}
  #searchBtn{padding:9px 8px;max-width:42vw}
}

/* Safe-area (iOS notch) */
@supports (padding: max(0px)){
  .site-header{
    padding-top: max(16px, env(safe-area-inset-top));
    padding-left: calc(16px + env(safe-area-inset-left));
    padding-right: calc(16px + env(safe-area-inset-right));
  }
  .container{
    padding-left: calc(clamp(12px, 3vw, 20px) + env(safe-area-inset-left));
    padding-right: calc(clamp(12px, 3vw, 20px) + env(safe-area-inset-right));
    padding-bottom: calc(48px + env(safe-area-inset-bottom));
  }
  footer.container{
    padding-bottom: calc(36px + env(safe-area-inset-bottom));
  }
  .mobile-nav{
    padding-top: calc(16px + env(safe-area-inset-top));
    padding-bottom: calc(16px + env(safe-area-inset-bottom));
    padding-left: calc(16px + env(safe-area-inset-left));
  }
}

/* Alturas de cards por contexto */
@media (min-width: 900px){
  .forecast-card{min-height: 132px}
  .today-card{min-height: 140px}
}

/* Desktop: layout com áreas fixas para evitar sobreposição do weatherCard */
@media (min-width: 860px){
  .container{
    grid-template-columns: 360px 1fr;
    grid-template-areas:
      "intro intro"
      "search weather"
      "search forecast"
      "search today";
    align-items: start;
  }
  .intro{grid-area:intro}
  .search-card{grid-area:search}
  #weatherCard{grid-area:weather;position:relative;z-index:0;min-width:0}
  #forecastSection{grid-area:forecast;position:relative;z-index:0;min-width:0}
  #todaySection{grid-area:today;position:relative;z-index:0;min-width:0}
}
